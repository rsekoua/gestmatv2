# ==================================================
# STAGING ENVIRONMENT CONFIGURATION
# ==================================================
# Application: GestMat v2
# Environment: Staging (Pre-production)
# Last Updated: 2025-11-15
# ==================================================

# ==================================================
# APPLICATION SETTINGS
# ==================================================
APP_NAME="GestMat v2 - Staging"
APP_ENV=staging
APP_KEY=  # GENERATE: php artisan key:generate
APP_DEBUG=true  # Activé pour debug en staging
APP_URL=https://staging.gestmat.votre-domaine.com
APP_TIMEZONE=UTC

APP_LOCALE=fr
APP_FALLBACK_LOCALE=en
APP_FAKER_LOCALE=fr_FR

APP_MAINTENANCE_DRIVER=file

BCRYPT_ROUNDS=10  # Moins strict pour tests

# ==================================================
# LOGGING CONFIGURATION
# ==================================================
LOG_CHANNEL=stack
LOG_STACK=daily
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=debug  # Plus verbeux pour staging

# ==================================================
# DATABASE CONFIGURATION - PostgreSQL
# ==================================================
DB_CONNECTION=pgsql
DB_HOST=staging-postgres-host.example.com
DB_PORT=5432
DB_DATABASE=gestmatv2_staging
DB_USERNAME=gestmat_staging_user
DB_PASSWORD=  # Mot de passe staging
DB_SSLMODE=prefer

# ==================================================
# REDIS CONFIGURATION
# ==================================================
REDIS_CLIENT=phpredis
REDIS_HOST=staging-redis-host.example.com
REDIS_PASSWORD=  # Mot de passe staging
REDIS_PORT=6379
REDIS_DB=0
REDIS_CACHE_DB=1
REDIS_PREFIX=gestmat_staging_

# ==================================================
# CACHE CONFIGURATION
# ==================================================
CACHE_STORE=redis
CACHE_PREFIX=gestmat_staging_cache_

# ==================================================
# SESSION CONFIGURATION
# ==================================================
SESSION_DRIVER=redis
SESSION_LIFETIME=120
SESSION_ENCRYPT=true
SESSION_PATH=/
SESSION_DOMAIN=.votre-domaine.com
SESSION_SECURE_COOKIE=true
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE=lax

# ==================================================
# QUEUE CONFIGURATION
# ==================================================
QUEUE_CONNECTION=redis
QUEUE_PREFIX=gestmat_staging_queue_

# ==================================================
# BROADCAST CONFIGURATION
# ==================================================
BROADCAST_CONNECTION=log

# ==================================================
# FILESYSTEM CONFIGURATION
# ==================================================
FILESYSTEM_DISK=local  # Local pour staging
# Ou S3 pour tester:
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_DEFAULT_REGION=eu-west-1
# AWS_BUCKET=gestmat-staging

# ==================================================
# MAIL CONFIGURATION
# ==================================================
MAIL_MAILER=log  # Log pour staging, ou Mailtrap pour tester
# Mailtrap configuration:
# MAIL_MAILER=smtp
# MAIL_HOST=sandbox.smtp.mailtrap.io
# MAIL_PORT=2525
# MAIL_USERNAME=your-mailtrap-username
# MAIL_PASSWORD=your-mailtrap-password
MAIL_ENCRYPTION=null
MAIL_FROM_ADDRESS=staging@votre-domaine.com
MAIL_FROM_NAME="${APP_NAME}"

# ==================================================
# SECURITY & RATE LIMITING
# ==================================================
THROTTLE_LOGIN=10,1  # Plus permissif pour tests
THROTTLE_API=120,1
THROTTLE_WEB=200,1

# ==================================================
# VITE CONFIGURATION
# ==================================================
VITE_APP_NAME="${APP_NAME}"

# ==================================================
# FILAMENT CONFIGURATION
# ==================================================
FILAMENT_FILESYSTEM_DISK=public

# ==================================================
# MONITORING (Optional)
# ==================================================
# Sentry avec environnement staging
# SENTRY_LARAVEL_DSN=https://your-sentry-dsn@sentry.io/project-id
# SENTRY_ENVIRONMENT=staging
# SENTRY_TRACES_SAMPLE_RATE=1.0  # 100% en staging

# ==================================================
# TELESCOPE & DEBUGBAR (Activés en staging)
# ==================================================
TELESCOPE_ENABLED=true
DEBUGBAR_ENABLED=true

# ==================================================
# BACKUP CONFIGURATION
# ==================================================
BACKUP_DISK=local
BACKUP_NOTIFICATION_EMAIL=dev@votre-domaine.com

# ==================================================
# ACTIVITY LOG CONFIGURATION
# ==================================================
ACTIVITY_LOG_ENABLED=true
ACTIVITY_LOG_DELETE_RECORDS_OLDER_THAN_DAYS=30  # Nettoyage plus fréquent

# ==================================================
# NOTES
# ==================================================
# 1. Staging doit reproduire production autant que possible
# 2. Utilisez des données de test, pas de données réelles
# 3. Testez toutes les fonctionnalités avant déploiement production
# 4. Les logs sont plus verbeux pour faciliter debug
