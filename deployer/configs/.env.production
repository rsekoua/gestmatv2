# ==================================================
# PRODUCTION ENVIRONMENT CONFIGURATION
# ==================================================
# Application: GestMat v2
# Environment: Production
# Last Updated: 2025-11-15
# ==================================================

# ==================================================
# APPLICATION SETTINGS
# ==================================================
APP_NAME="GestMat v2"
APP_ENV=production
APP_KEY=  # GENERATE: php artisan key:generate
APP_DEBUG=false
APP_URL=https://gestmat.votre-domaine.com
APP_TIMEZONE=UTC

APP_LOCALE=fr
APP_FALLBACK_LOCALE=en
APP_FAKER_LOCALE=fr_FR

APP_MAINTENANCE_DRIVER=file
APP_MAINTENANCE_STORE=database

BCRYPT_ROUNDS=12

# ==================================================
# LOGGING CONFIGURATION
# ==================================================
LOG_CHANNEL=stack
LOG_STACK=daily
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=error

# Slack notifications for critical errors (optional)
# LOG_SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# ==================================================
# DATABASE CONFIGURATION - PostgreSQL
# ==================================================
DB_CONNECTION=pgsql
DB_HOST=your-postgres-host.example.com
DB_PORT=5432
DB_DATABASE=gestmatv2_production
DB_USERNAME=gestmat_user
DB_PASSWORD=  # CHANGEZ CE MOT DE PASSE FORT
DB_SSLMODE=require  # Pour connexions sécurisées

# ==================================================
# REDIS CONFIGURATION
# ==================================================
REDIS_CLIENT=phpredis
REDIS_HOST=your-redis-host.example.com
REDIS_PASSWORD=  # CHANGEZ CE MOT DE PASSE FORT
REDIS_PORT=6379
REDIS_DB=0
REDIS_CACHE_DB=1
REDIS_PREFIX=gestmat_

# ==================================================
# CACHE CONFIGURATION
# ==================================================
CACHE_STORE=redis
CACHE_PREFIX=gestmat_cache_

# ==================================================
# SESSION CONFIGURATION
# ==================================================
SESSION_DRIVER=redis
SESSION_LIFETIME=120
SESSION_ENCRYPT=true
SESSION_PATH=/
SESSION_DOMAIN=.votre-domaine.com
SESSION_SECURE_COOKIE=true
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE=lax

# ==================================================
# QUEUE CONFIGURATION
# ==================================================
QUEUE_CONNECTION=redis
QUEUE_PREFIX=gestmat_queue_

# ==================================================
# BROADCAST CONFIGURATION
# ==================================================
BROADCAST_CONNECTION=log

# ==================================================
# FILESYSTEM CONFIGURATION
# ==================================================
FILESYSTEM_DISK=s3  # ou 'local' pour stockage local
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=eu-west-1
AWS_BUCKET=gestmat-production
AWS_USE_PATH_STYLE_ENDPOINT=false
AWS_URL=https://gestmat-production.s3.eu-west-1.amazonaws.com

# ==================================================
# MAIL CONFIGURATION
# ==================================================
MAIL_MAILER=smtp
MAIL_HOST=smtp.sendgrid.net  # ou smtp.mailtrap.io, smtp.mailgun.org
MAIL_PORT=587
MAIL_USERNAME=apikey  # Pour SendGrid
MAIL_PASSWORD=  # VOTRE API KEY
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=noreply@votre-domaine.com
MAIL_FROM_NAME="${APP_NAME}"

# Alternative: AWS SES
# MAIL_MAILER=ses
# AWS_SES_REGION=eu-west-1

# ==================================================
# SECURITY & RATE LIMITING
# ==================================================
THROTTLE_LOGIN=5,1  # 5 tentatives par minute
THROTTLE_API=60,1   # 60 requêtes par minute
THROTTLE_WEB=100,1  # 100 requêtes par minute

# ==================================================
# CORS CONFIGURATION
# ==================================================
CORS_ALLOWED_ORIGINS=https://gestmat.votre-domaine.com
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With

# ==================================================
# VITE CONFIGURATION
# ==================================================
VITE_APP_NAME="${APP_NAME}"
ASSET_URL=https://cdn.votre-domaine.com  # Si vous utilisez un CDN

# ==================================================
# FILAMENT CONFIGURATION
# ==================================================
FILAMENT_FILESYSTEM_DISK=public

# ==================================================
# MONITORING & ANALYTICS (Optional)
# ==================================================
# Sentry Error Tracking
# SENTRY_LARAVEL_DSN=https://your-sentry-dsn@sentry.io/project-id
# SENTRY_TRACES_SAMPLE_RATE=0.1

# Google Analytics
# GOOGLE_ANALYTICS_ID=UA-XXXXXXXXX-X

# ==================================================
# BACKUP CONFIGURATION
# ==================================================
BACKUP_DISK=s3
BACKUP_NOTIFICATION_EMAIL=admin@votre-domaine.com

# ==================================================
# ACTIVITY LOG CONFIGURATION
# ==================================================
ACTIVITY_LOG_ENABLED=true
ACTIVITY_LOG_DELETE_RECORDS_OLDER_THAN_DAYS=90

# ==================================================
# PERFORMANCE OPTIMIZATION
# ==================================================
TELESCOPE_ENABLED=false  # Désactivé en production pour performance
DEBUGBAR_ENABLED=false   # Désactivé en production

# ==================================================
# TRUSTED PROXIES (Si derrière load balancer)
# ==================================================
# TRUSTED_PROXIES=*
# TRUSTED_HOSTS=gestmat.votre-domaine.com

# ==================================================
# NOTES IMPORTANTES
# ==================================================
# 1. GÉNÉREZ UN APP_KEY UNIQUE: php artisan key:generate
# 2. UTILISEZ DES MOTS DE PASSE FORTS (minimum 32 caractères)
# 3. NE COMMITEZ JAMAIS CE FICHIER DANS GIT
# 4. UTILISEZ UN GESTIONNAIRE DE SECRETS (AWS Secrets Manager, Vault)
# 5. ACTIVEZ 2FA POUR TOUS LES COMPTES ADMIN
# 6. CONFIGUREZ LES BACKUPS AUTOMATIQUES
# 7. TESTEZ LA CONFIGURATION SUR STAGING AVANT PRODUCTION
